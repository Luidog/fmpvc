#!/usr/bin/env ruby
# Requires: Summary.xml, run from main directory (which includes fmp_{clone,ddr,text}/)

require 'fmpvc'
include FMPVC

# create a DDR
# puts
# puts "Creating new DDR..."
ddr_dir = './fmp_ddr'
ddr = DDR.new(ddr_dir)

# process FMPReport files
# puts
# puts "Creating FMPReports..."
ddr.process_reports

# write report files to disk
# puts
# puts "Write report files to disk..."
ddr.write_reports

# create a tree file, if available
require 'mkmf'
module MakeMakefile::Logging
  # don't let MakeMake leave extraneous logs
  @logfile = File::NULL    
end 
tree_command = find_executable 'tree'
if tree_command
   puts "Creating tree.txt."
   `#{tree_command} -F > tree.txt`
end

puts


